<?php

/**
 * @file
 * Stanford Paragraph Types Defaults.
 */

/**
 * Implements hook_permission().
 */
function stanford_paragraph_types_defaults_permission() {
  return array(
    'administer stanford paragraph types defaults' => array(
      'title' => t('Administer Stanford Paragraph Types Defaults'),
      'description' => t('Create and modify default paragraph items.'),
    ),
  );
}

/**
 * Implements hook_menu().
 */
function stanford_paragraph_types_defaults_menu() {
  $items = array();
  $items['admin/structure/paragraphs/defaults'] = array(
    'title' => 'Paragraph Defaults',
    'page callback' => 'stanford_paragraph_types_defaults_overview',
    'file' => 'stanford_paragraph_types_defaults.forms.inc',
    'access arguments' => array('administer stanford paragraph types defaults'),
    'type' => MENU_LOCAL_TASK | MENU_NORMAL_ITEM,
  );
  $items['admin/structure/paragraphs/defaults/overview'] = array(
    'title' => 'Paragraph Defaults',
    'type' => MENU_DEFAULT_LOCAL_TASK,
  );
  $items['admin/structure/paragraphs/defaults/%'] = array(
    'title' => 'Example Page',
    'page callback' => 'example_page',
    'access arguments' => array('access content'),
    'type' => MENU_SUGGESTED_ITEM,
  );
  return $items;
}


/**
 * Implements hook_form_alter().
 */
function stanford_paragraph_types_defaults_form_alter(&$form, &$form_state, $form_id) {
  if (!isset($form['#entity_type']) || !isset($form['#bundle'])) {
    return;
  }
  $fields = field_read_fields(array(
    'type' => 'paragraphs',
    'entity_type' => $form['#entity_type'],
    'bundle' => $form['#bundle'],
  ));
  if (empty($fields)) {
    return;
  }

  dpm($fields);
  dpm($form);
}